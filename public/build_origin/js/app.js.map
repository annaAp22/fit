{"version":3,"sources":["map.js","common.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var mapDiv = document.getElementById('map');\r\nvar mapLoad = function(e) {\r\n    mapDiv.removeEventListener('click', mapLoad);\r\n    $.getScript( \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBIc5obn1ArfkEzXhkgZiMyyHPRQmjNx5M\", function() {\r\n        init();\r\n    });\r\n};\r\nmapDiv.addEventListener('click', mapLoad);\r\n\r\n\r\n// When the window has finished loading create our google map below\r\n//google.maps.event.addDomListener(window, 'load', init);\r\n\r\nfunction init() {\r\n    // Basic options for a simple Google Map\r\n    // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions\r\n    var mapOptions = {\r\n        // How zoomed in you want the map to start at (always required)\r\n        zoom: 15,\r\n\r\n        // The latitude and longitude to center the map (always required)\r\n        center: new google.maps.LatLng(55.711354, 37.654629), /* Moscow*/\r\n\r\n        // Do not change zoom on mouse scroll\r\n        scrollwheel: false,\r\n\r\n        // How you would like to style the map.\r\n        // This is where you would paste any style found on Snazzy Maps.\r\n        styles: [\r\n            {\r\n                \"featureType\": \"water\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#e9e9e9\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 17\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"landscape\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#f5f5f5\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 20\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"road.highway\",\r\n                \"elementType\": \"geometry.fill\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#ffffff\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 17\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"road.highway\",\r\n                \"elementType\": \"geometry.stroke\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#ffffff\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 29\r\n                    },\r\n                    {\r\n                        \"weight\": 0.2\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"road.arterial\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#ffffff\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 18\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"road.local\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#ffffff\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 16\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"poi\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#f5f5f5\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 21\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"poi.park\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#dedede\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 21\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"elementType\": \"labels.text.stroke\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"visibility\": \"on\"\r\n                    },\r\n                    {\r\n                        \"color\": \"#ffffff\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 16\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"elementType\": \"labels.text.fill\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"saturation\": 36\r\n                    },\r\n                    {\r\n                        \"color\": \"#333333\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 40\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"elementType\": \"labels.icon\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"visibility\": \"off\"\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"transit\",\r\n                \"elementType\": \"geometry\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#f2f2f2\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 19\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"administrative\",\r\n                \"elementType\": \"geometry.fill\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#fefefe\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 20\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"featureType\": \"administrative\",\r\n                \"elementType\": \"geometry.stroke\",\r\n                \"stylers\": [\r\n                    {\r\n                        \"color\": \"#fefefe\"\r\n                    },\r\n                    {\r\n                        \"lightness\": 17\r\n                    },\r\n                    {\r\n                        \"weight\": 1.2\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n\r\n    // Get the HTML DOM element that will contain your map\r\n    // We are using a div with id=\"map\" seen below in the <body>\r\n    var mapElement = document.getElementById('map');\r\n\r\n    // Create the Google Map using our element and options defined above\r\n    var map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n    // Let's also add a marker while we're at it\r\n    var marker = new google.maps.Marker({\r\n        position: new google.maps.LatLng(55.710074, 37.654759),\r\n        map: map,\r\n        title: 'Магазин',\r\n        icon: \"/img/map_point-min.png\"\r\n    });\r\n\r\n    // center map on window resize\r\n    google.maps.event.addDomListener(window, \"resize\", function() {\r\n        var center = map.getCenter();\r\n        google.maps.event.trigger(map, \"resize\");\r\n        map.setCenter(center);\r\n    });\r\n}","$(function(){\n    // Toggle active class\n    $(\".js-toggle-active\").click(function(e){\n        var $this = $(this),\n            reset = $this.data('reset');\n        if($this.hasClass(\".js-prevent-default\"))\n            e.preventDefault();\n        // Remove active class\n        if(typeof reset !== 'undefined') {\n            $(reset).removeClass(\"active\")\n        }\n\n        $this.toggleClass('active');\n    });\n\n    //Prevent default for hovered elements\n    $(\".js-prevent\").click(function(e){\n        e.preventDefault();\n        return false;\n    });\n\n    // Price range slider init\n    var rangeSlider = document.getElementById('js-range-slider');\n    if( rangeSlider ) {\n        var $this = $(rangeSlider);\n            rStart = $this.data('start'),\n            rRange = $this.data('range');\n\n        noUiSlider.create(rangeSlider, {\n            start: [ rStart[0], rStart[1] ],\n            connect: true,\n            range: {\n                'min': rRange[0],\n                'max': rRange[1]\n            }\n        });\n\n        var priceMin = document.getElementById('js-price-min'),\n            priceMax = document.getElementById('js-price-max');\n\n        rangeSlider.noUiSlider.on('update', function( values, handle ) {\n\n            var value = values[handle];\n\n            if ( handle ) {\n                priceMax.value = Math.round(value);\n            } else {\n                priceMin.value = Math.round(value);\n            }\n        });\n\n        priceMin.addEventListener('change', function(){\n            rangeSlider.noUiSlider.set([this.value, null]);\n        });\n        priceMax.addEventListener('change', function(){\n            rangeSlider.noUiSlider.set([null, this.value]);\n        });\n    }\n\n    // Square check filter (size, color)\n    var squareCheckFilter = $('.js-square-check-filter');\n    if( squareCheckFilter ) {\n        $(squareCheckFilter).each(function() {\n            var filter = $(this);\n\n\n\n            filter.find(\".js-square\").click(function(){\n                var square = $(this),\n                    parent = square.parent(),\n                    single = false;\n\n                // if single checked needed then reset all checkboxes\n                if(parent.hasClass(\"js-square-check-single\")) {\n                    single = true;\n                }\n\n                if( square.hasClass(\"active\") ) {\n                    if(single) {\n                        removeActiveSquares(parent);\n                    }\n                    else {\n                        square.removeClass(\"active\");\n                        square.find(\"input\").attr(\"disabled\", true);\n                    }\n                }\n                else {\n                    if(single) {\n                        removeActiveSquares(parent);\n                    }\n                    square.addClass(\"active\");\n                    square.find(\"input\").attr(\"disabled\", null);\n                }\n            });\n        });\n    }\n\n    // Remove active class from all squares\n    function removeActiveSquares(parent) {\n        parent.find(\".active\").each(function(){\n            $(this).removeClass(\"active\");\n            $(this).find(\"input\").attr(\"disabled\", true);\n        });\n    }\n\n    // Show more info in some container\n    $(\".js-show-more\").click(function(e) {\n        e.preventDefault();\n        var $this = $(this);\n        $this.toggleClass(\"active\");\n        $this.parent().toggleClass(\"active\");\n    });\n\n    // Select behaviour emulation\n    $(\".js-select\").each(function(){\n        var select = $(this);\n        select.find(\".js-option\").click(function(){\n            select.find(\".js-selected\").text($(this).text());\n        });\n    });\n\n    // Toggle target active class on click\n    $(\".js-toggle-active-target\").click(function(e){\n        e.preventDefault();\n        toggleActiveTarget($(this));\n    });\n\n    // Toggle target active class on mouse over\n    $(\".js-toggle-active-target_over\").mouseenter(function(){\n        if( !$(this).hasClass('active'))\n            toggleActiveTarget($(this));\n    });\n\n    function toggleActiveTarget($this) {\n        var target = $this.data('target'),\n            switchN = $this.data('switch'),\n            reset = $this.data('reset');\n\n        // toggle switch if needed\n        if(typeof switchN !== 'undefined') {\n            $(\"[data-switch=\"+switchN+\"]\").toggleClass(\"active\");\n        }\n        // remove active from all elements\n        else if(typeof reset !== 'undefined') {\n            $(reset).removeClass(\"active\")\n        }\n        else {\n            $this.toggleClass(\"active\");\n        }\n\n        $(target).toggleClass(\"active\");\n    }\n\n    // Show notice popup on element hover\n    $(\".js-hover-notice\").hover(function() {\n        $(this).find(\".popup-notice\").toggleClass('active');\n    });\n\n    // Show notice popup on element click (not used yet)\n    $(\".js-click-notice\").click(function() {\n        var target = $(this).data(\"target\"),\n            popup;\n        if(typeof target !== \"undefined\") {\n            popup = $(this).closest(\".popup-notice_\" + target);\n        }\n        else {\n            popup = $(this).find(\".popup-notice\");\n        }\n        popup.addClass('active');\n        setTimeout(function(){\n            popup.removeClass('active');\n        }, 6000);\n    });\n\n    // Add to cart\n    $(\".js-add-to-cart\").click(function(e) {\n        e.preventDefault();\n        var form = $(this).closest('form'),\n            data = form.serializeFormJSON();\n        if(typeof data.size === \"undefined\") {\n            var size = form.find(\".js-popup-size\");\n            size.addClass('active');\n            setTimeout(function(){\n                size.removeClass('active');\n            }, 3000);\n        }\n        else {\n            // form.submit();\n            $(this).addClass('active');\n        }\n    });\n\n    // Form serialize as json\n    $.fn.serializeFormJSON = function () {\n\n        var o = {};\n        var a = this.serializeArray();\n        $.each(a, function () {\n            if (o[this.name]) {\n                if (!o[this.name].push) {\n                    o[this.name] = [o[this.name]];\n                }\n                o[this.name].push(this.value || '');\n            } else {\n                o[this.name] = this.value || '';\n            }\n        });\n        return o;\n    };\n\n\n\n    // Desktop / mobile elements detach / attach\n    $('header').on(\"webkitTransitionEnd transitionend oTransitionEnd\", function (event) {\n        if (event.originalEvent.propertyName == \"min-height\") {\n            moveElements();\n        }\n    });\n    moveElements();\n    function moveElements(){\n        var women = $('.js-dropdown-women'),\n            men = $('.js-dropdown-men'),\n            navigation = $('.js-pages'),\n            filter = $('.sidebar-filter');\n        var screenSize = checkWindowWidth();\n\n        navigation.detach();\n        women.detach();\n        men.detach();\n        filter.detach();\n\n        if ( screenSize ) {\n            //desktop screen\n            navigation.insertAfter('.nav-catalog');\n            women.prependTo('.js-women-desktop');\n            men.prependTo('.js-men-desktop');\n            filter.prependTo('.sidebar');\n\n        } else {\n            //mobile screen\n            women.appendTo('.js-women-mobile');\n            men.appendTo('.js-men-mobile');\n            navigation.insertAfter('.js-pages-mobile');\n            filter.appendTo('#sidebar-filters');\n        }\n    }\n    function checkWindowWidth() {\n        var mq = window.getComputedStyle(document.querySelector('header'), '::before').getPropertyValue('content').replace(/\"/g, '').replace(/'/g, \"\");\n        return (mq != 'mobile');\n    }\n    var sidebarOpened = false;\n    // Toggle active on filter or navigation open\n    $(\".js-toggle-sidebar\").click(function(){\n        var $this = $(this),\n            target = $this.data('target'),\n            active = $this.hasClass('active');\n        if(sidebarOpened) {\n            closeSidebar();\n            if(!active) {\n                setTimeout(function() {\n                    openSidebar($this, target);\n                }, 500);\n            }\n        }\n        else {\n            openSidebar($this, target);\n        }\n    });\n    function closeSidebar() {\n        $('.js-sidebar-open').removeClass('active');\n        $('.js-nav-visible').removeClass('active');\n        $('.js-filter-visible').removeClass('active');\n        $('.js-toggle-sidebar').removeClass('active');\n        sidebarOpened = false;\n    }\n    function openSidebar($this, target) {\n        setTimeout(function() {\n            $this.addClass('active');\n        }, 300);\n        $(target).addClass('active');\n        $('.js-sidebar-open').addClass('active');\n        sidebarOpened = true;\n    }\n\n    // Product detailed image carousel\n    $(\"#js-product-gallery-nav\").carousel({\n        vertical : true,\n        margin: 0,\n        responsive: {\n            xl: {items: 5, options: {margin: 0, vertical: true}},\n            lg: {items: 5, options: {margin: 0, vertical: true}},\n            md: {items: 5, options: {margin: 0, vertical: true}},\n            sm: {items: 5, options: {margin: 0, vertical: false}},\n            xs: {items: 3, options: {margin: 0, vertical: false}}\n        }\n    });\n\n    //Product set carousel\n    $(\"#js-product-set\").carousel();\n\n    // Product seen carousel\n    $(\".js-product-carousel\").carousel();\n\n    // Main page banners slider\n    $(\"#js-main-banner\").carousel({\n        margin: 0,\n        pagination: true,\n        responsive: {\n            xl: 1,\n            lg: 1,\n            md: 1,\n            sm: 1,\n            xs: 1\n        }\n    });\n\n    // Load VK comments widget\n    $(\".js-vk-comments-widget\").on('click.vk',function() {\n        $(this).off('click.vk');\n        $.getScript(\"//vk.com/js/api/openapi.js?145\", function() {\n            VK.init({apiId: API_ID, onlyWidgets: true});\n            VK.Widgets.Comments(\"js-vk_comments\", {limit: 5, attach: false});\n        });\n    });\n\n\n    // Mask phone\n    $('.phone').mask(\"+7 000 000 00 000\", {placeholder: \"+7 ___ ___ __ __\"});\n\n    var $body = $('body');\n\n    // Check required steps\n    $body.on('keyup', '.js-required-fields', function(e) {\n        var checked = 0;\n        $('.js-required-fields').each(function(index, el) {\n            if(el.name == 'phone') {\n                if( el.value.length > 14 ) {\n                    checked++;\n                }\n            }\n            else {\n                if(el.value && el.value.length > 1) {\n                    checked++;\n                }\n            }\n        });\n\n        if(checked == 2) {\n            $('.js-step-next').attr('disabled', false);\n        }\n        else{\n            $('.js-step-next').attr('disabled', true);\n        }\n    });\n\n    // Checkout steps\n    $body.on('click', '.js-step-next', function(e) {\n        e.preventDefault();\n        nextStep($(this));\n    });\n    // Next step, accepts element or number\n    function nextStep($el) {\n        var step = $.isNumeric($el) ? $el : $el.data('next_step');\n        if(typeof step !== 'undefined') {\n            $(\".js-step\").removeClass('active');\n            $(\".js-step_\" + step).addClass('active');\n        }\n    }\n\n    // Order submit click\n    $body.on('click', '#js-order-submit', function(e) {\n        e.preventDefault();\n        var form = $(this).closest('form'),\n            data = form.serializeFormJSON();\n\n        // Do ajax order request\n\n        // Show next step\n        nextStep(3);\n    });\n});\n\n\n\n"]}