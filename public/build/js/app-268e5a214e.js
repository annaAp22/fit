function init(){var e={zoom:15,center:new google.maps.LatLng(55.711354,37.654629),scrollwheel:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]},t=document.getElementById("map"),i=new google.maps.Map(t,e);new google.maps.Marker({position:new google.maps.LatLng(55.710074,37.654759),map:i,title:"Магазин",icon:"/img/map_point-min.png"});google.maps.event.addDomListener(window,"resize",function(){var e=i.getCenter();google.maps.event.trigger(i,"resize"),i.setCenter(e)})}$(function(){var e=$("#js-filters"),t=$(".js-sort"),i=e.find("input[name=page]"),n=$(".js-goods-count"),a=$("#js-goods"),s=$(".js-pagination"),o=["page","_token","category_id","brand_id","tag_id","price_from","price_to"],r="",l=function(t){"undefined"==typeof t&&(t=!1),i.val(1),t&&e.trigger("submit")},c=function(){e.find("input[type=checkbox]","input[type=radio]").attr("checked",!1),e.find("input[name^=attribute]").attr("disabled",!0),$(".js-square").removeClass("active"),d.noUiSlider.set([rRange[0],rRange[1]]),l(!0)};for(var f in o)r+="[name!="+o[f]+"]";""==i.val()&&s.hide();var d=document.getElementById("js-range-slider");if(d){var p=$(d);rStart=p.data("start"),rRange=p.data("range"),noUiSlider.create(d,{start:[rStart[0],rStart[1]],connect:!0,range:{min:rRange[0],max:rRange[1]}});var u=document.getElementById("js-price-min"),m=document.getElementById("js-price-max");d.noUiSlider.on("update",function(e,t){var i=e[t];t?m.value=Math.round(i):u.value=Math.round(i)}),d.noUiSlider.on("set",function(){l()}),u.addEventListener("change",function(){d.noUiSlider.set([this.value,null])}),m.addEventListener("change",function(){d.noUiSlider.set([null,this.value])})}e.find("input[name^=attribute],select[name^=attribute]").on("change",function(e){e.preventDefault(),l()}),e.find(".js-square").on("click",function(e){l()}),e.on("submit",function(e){e.preventDefault();var t=$(this).serialize();$.post($(this).attr("action"),t,function(e){e.clear?(i.val(2),a.html($(e.items))):"all"==i.val()?a.html($(e.items)):a.append($(e.items)),null===e.next_page?s.hide():(s.show(),i.val(e.next_page)),n.html(e.count)})}),t.on("click",function(i){i.preventDefault();var n=$(this).data("sort");e.find("input[name=sort]").val(n),$(this).hasClass("active")?$(this).removeClass("active"):(t.removeClass("active"),$(this).addClass("active")),l(!0)}),s.on("click",function(t){t.preventDefault();var n=$(this).data("all");"undefined"!=typeof n&&n&&i.val("all"),e.trigger("submit")}),$(".js-filters-reset").on("click",function(e){return e.preventDefault(),c(),!1})});var mapDiv=document.getElementById("map"),mapLoad=function(e){mapDiv.removeEventListener("click",mapLoad),$.getScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyBIc5obn1ArfkEzXhkgZiMyyHPRQmjNx5M",function(){init()})};mapDiv.addEventListener("click",mapLoad),$(function(){function e(e){e.find(".active").each(function(){$(this).removeClass("active"),$(this).find("input").attr("disabled",!0)})}function t(e){var t=e.data("target"),i=e.data("switch"),n=e.data("reset");"undefined"!=typeof i?$("[data-switch="+i+"]").toggleClass("active"):"undefined"!=typeof n?$(n).removeClass("active"):e.toggleClass("active"),$(t).toggleClass("active")}function i(){var e=$(".js-dropdown-women"),t=$(".js-dropdown-men"),i=$(".js-pages"),a=$(".sidebar-filter"),s=n();i.detach(),e.detach(),t.detach(),a.detach(),s?(i.insertAfter(".nav-catalog"),e.prependTo(".js-women-desktop"),t.prependTo(".js-men-desktop"),a.prependTo(".sidebar")):(e.appendTo(".js-women-mobile"),t.appendTo(".js-men-mobile"),i.insertAfter(".js-pages-mobile"),a.appendTo("#sidebar-filters"))}function n(){var e=window.getComputedStyle(document.querySelector("header"),"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"");return"mobile"!=e}function a(){$(".js-sidebar-open").removeClass("active"),$(".js-nav-visible").removeClass("active"),$(".js-filter-visible").removeClass("active"),$(".js-toggle-sidebar").removeClass("active"),c=!1}function s(e,t){setTimeout(function(){e.addClass("active")},300),$(t).addClass("active"),$(".js-sidebar-open").addClass("active"),c=!0}function o(e){var t=$.isNumeric(e)?e:e.data("next_step");"undefined"!=typeof t&&($(".js-step").removeClass("active"),$(".js-step_"+t).addClass("active"))}var r=$("body");r.on("click",".js-toggle-active",function(e){var t=$(this),i=t.data("reset");t.hasClass(".js-prevent-default")&&e.preventDefault(),"undefined"!=typeof i&&$(i).removeClass("active"),t.toggleClass("active")}),r.on("click",".js-prevent",function(e){return e.preventDefault(),!1});var l=$(".js-square-check-filter");l&&$(l).each(function(){$(this);r.on("click",".js-square",function(){var t=$(this),i=t.parent(),n=!1;i.hasClass("js-square-check-single")&&(n=!0),t.hasClass("active")?n?e(i):(t.removeClass("active"),t.find("input").attr("disabled",!0)):(n&&e(i),t.addClass("active"),t.find("input").attr("disabled",null))})}),r.on("click",".js-show-more",function(e){e.preventDefault();var t=$(this);t.toggleClass("active"),t.parent().toggleClass("active")}),r.on("click",".js-select",function(){var e=$(this);e.find(".js-option").click(function(){e.find(".js-selected").text($(this).text())})}),r.on("click",".js-toggle-active-target",function(e){e.preventDefault(),t($(this))}),r.on("mouseenter",".js-toggle-active-target_over",function(){$(this).hasClass("active")||t($(this))}),r.on("mouseover",".js-hover-notice",function(){$(this).find(".popup-notice").addClass("active")}),r.on("mouseout",".js-hover-notice",function(){$(this).find(".popup-notice").removeClass("active")}),r.on("click",".js-click-notice",function(){var e,t=$(this).data("target");e="undefined"!=typeof t?$(this).closest(".popup-notice_"+t):$(this).find(".popup-notice"),e.addClass("active"),setTimeout(function(){e.removeClass("active")},6e3)}),r.on("click",".js-add-to-cart",function(e){e.preventDefault();var t=$(this).closest("form"),i=t.serializeFormJSON();if("undefined"==typeof i.size){var n=t.find(".js-popup-size");n.addClass("active"),setTimeout(function(){n.removeClass("active")},3e3)}else t.submit(),$(this).addClass("active")}),$.fn.serializeFormJSON=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$("header").on("webkitTransitionEnd transitionend oTransitionEnd",function(e){"min-height"==e.originalEvent.propertyName&&i()}),i();var c=!1;$(".js-toggle-sidebar").click(function(){var e=$(this),t=e.data("target"),i=e.hasClass("active");c?(a(),i||setTimeout(function(){s(e,t)},500)):s(e,t)}),$("#js-product-gallery-nav").carousel({vertical:!0,margin:0,responsive:{xl:{items:5,options:{margin:0,vertical:!0}},lg:{items:5,options:{margin:0,vertical:!0}},md:{items:5,options:{margin:0,vertical:!0}},sm:{items:5,options:{margin:0,vertical:!1}},xs:{items:3,options:{margin:0,vertical:!1}}}}),$("#js-product-set").carousel(),$(".js-product-carousel").carousel(),$("#js-main-banner").carousel({margin:0,pagination:!0,responsive:{xl:1,lg:1,md:1,sm:1,xs:1}}),$(".js-vk-comments-widget").on("click.vk",function(){$(this).off("click.vk"),$.getScript("//vk.com/js/api/openapi.js?145",function(){VK.init({apiId:API_ID,onlyWidgets:!0}),VK.Widgets.Comments("js-vk_comments",{limit:5,attach:!1})})}),$(".phone").mask("+7 000 000 00 000",{placeholder:"+7 ___ ___ __ __"}),r.on("keyup",".js-required-fields",function(e){var t=0;$(".js-required-fields").each(function(e,i){"phone"==i.name?i.value.length>14&&t++:i.value&&i.value.length>1&&t++}),2==t?$(".js-step-next").attr("disabled",!1):$(".js-step-next").attr("disabled",!0)}),r.on("click",".js-step-next",function(e){e.preventDefault(),o($(this))}),r.on("click","#js-order-submit",function(e){e.preventDefault();var t=$(this).closest("form");t.serializeFormJSON();o(3)}),r.on("click",".js-play-video",function(e){e.preventDefault();var t=$(this),i=t.parent(),n=i.find("iframe");i.addClass("active"),n.attr("src",n.data("src"))}),r.on("submit",".js-form-ajax",function(e){e.preventDefault();var t=$(this).attr("action"),i=$(this).serialize();$.post(t,i,function(e){if("undefined"!=typeof e.error,"undefined"!=typeof e.action){var t=window[e.action];"function"==typeof t&&t(e)}"undefined"!=typeof e.modal&&$.fancybox.open(e.modal)},"json")})});