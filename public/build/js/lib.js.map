{"version":3,"sources":["loader.js","inject_params.js","defer.js","thank.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"lib.js","sourcesContent":["$(function() {\r\n    window.loader = $('#loader');\r\n\r\n    $(document).ajaxStart(function() {\r\n        if (window.loader.hasClass('hidden')) $(window.loader).removeClass('hidden');\r\n    });\r\n\r\n    $(document).ajaxStop(function() {\r\n        if (!window.loader.hasClass('hidden')) $(window.loader).addClass('hidden');\r\n    });\r\n});","// Подстановка параметров в строку\r\n// Например:\r\n// window.injectParams('/url/#id/#name', { id: 'foo', name: 'bar' })\r\n// => /url/foo/bar\r\nwindow.injectParams = function(str, params) {\r\n    for(var paramName in params)\r\n        str = str.split('#' + paramName).join(params[paramName]);\r\n    return str;\r\n};","window.initDefer = function(options) {\r\n    window.defer = options;\r\n\r\n    var requiredOptions = ['url', 'buttonSelector', 'countSelector'];\r\n\r\n    for(var index in requiredOptions) {\r\n        if(typeof(window.defer[requiredOptions[index]]) === 'undefined') {\r\n            console.error('Function `initDefer` requires `' + requiredOptions[index] + '` option.');\r\n            return;\r\n        }\r\n    }\r\n\r\n    if(typeof(window.defer.activeClass) === 'undefined')\r\n        window.defer.activeClass = 'active';\r\n\r\n    $(document).on('click', window.defer.buttonSelector, function() {\r\n        var productId = $(this).data('id');\r\n\r\n        if($(this).hasClass(window.defer.activeClass))\r\n            $(this).removeClass(window.defer.activeClass);\r\n        else $(this).addClass(window.defer.activeClass);\r\n\r\n        $.get(window.injectParams(window.defer.url, {id: productId}), function(data) {\r\n            $(window.defer.countSelector).text(data);\r\n        });\r\n    });\r\n};\r\n","// Открывает модальное окно с сообщением для покупателя\r\n// window.thankYouCustomer('Error'); - выведет сообщение об ошибке\r\n// window.thankYouCustomer('A message', 'Bob') - поблагодарит Bob`а за лид\r\nwindow.thankYouCustomer = function(message, name) {\r\n    var $modal = $('#thanks'),\r\n        $title = $modal.find('.form-modal_title'),\r\n        $message = $modal.find('p');\r\n\r\n    if(typeof(name) === 'undefined') {\r\n        $title.text('Произошла ошибка!');\r\n        $message.text(message);\r\n    } else {\r\n        $title.text('Спасибо, ' + name + '!');\r\n        $message.text(message);\r\n    }\r\n\r\n    $.fancybox.open({ src: '#thanks', type: 'inline' });\r\n};\r\n"]}